{% extends 'base.html.twig' %}

{% block title %}Mon restaurant
{% endblock %}

{% block body %}

	<h1>Mon restaurant</h1>
	{% for label, messages in app.flashes %}
		{% for message in messages %}
			<div class="alert alert-{{ label }}">
				{% autoescape false %}
					{{ message }}
				{% endautoescape %}
			</div>
		{% endfor %}
	{% endfor %}

	<div>
		<h2>{{ restaurant.name ~ ' (' ~ restaurant.slug ~ ')' }}</h2>
		{% if restaurant.bannerName %}
			<img src="{{ vich_uploader_asset(restaurant, 'bannerFile') }}" alt="BanniÃ¨re" class="w-1/2">
		{% endif %}
		<p>{{ restaurant.description }}</p>
		<p>Adresse:
			{{ restaurant.address ~ ' ' ~ restaurant.postalCode ~ ' ' ~ restaurant.city ~ ', ' ~ restaurant.country }}</p>
		<script type="module" src="{{ asset('webcomponents/MapPreview.js') }}"></script>
		<map-preview address="{{ restaurant.address|e('html_attr') }}" postal-code="{{ restaurant.postalCode|e('html_attr') }}" city="{{ restaurant.city|e('html_attr') }}" country="{{ restaurant.country|e('html_attr') }}"></map-preview>
		<p>Price Range:
			{{ restaurant.priceRange }}</p>
		<p>Opening Hours:
			{{ restaurant.openingHours }}</p>
		{% if restaurant.phoneNumber is not null %}
			<p>Contact:
				{{ restaurant.phoneNumber }}</p>
		{% endif %}
		{% if restaurant.website is not null %}
			<p>Website:
				<a target="_blank" href="{{ restaurant.website }}">{{ restaurant.website }}</a>
			</p>
		{% endif %}
	</div>
	<div>
		<a href="{{ path('app_restaurant_edit') }}">Modifier</a>
		<a href="{{ path('app_restaurant_delete') }}">Supprimer</a>
	</div>

	<div class="mt-8">
		<h2 class="text-xl font-semibold mb-4">Avis clients</h2>

		<script type="module" src="{{ asset('webcomponents/RestaurantReviewManager.js') }}"></script>

		<restaurant-review-manager restaurant-id="{{ restaurant.id }}" csrf="{{ csrf_token('review_response') }}"></restaurant-review-manager>
	</div>


{% endblock %}
